<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Secure File Upload</title>
</head>

<body>
    <h2>Secure File Vault (Flask)</h2>

    <p>Si un token admin est requis, renseigne-le ici :</p>
    <input id="token" placeholder="X-Auth-Token (si utilisÃ©)" style="width:400px">

    <h3>Upload</h3>
    <input type="file" id="fileInput">
    <button onclick="upload()">Upload</button>
    <pre id="out"></pre>

    <script>
        async function upload() {
            const token = document.getElementById('token').value;
            const f = document.getElementById('fileInput').files[0];
            if (!f) { alert('choisir un fichier'); return; }
            const fd = new FormData();
            fd.append('file', f);
            const headers = {};
            if (token) headers['X-Auth-Token'] = token;
            const resp = await fetch('/upload', { method: 'POST', body: fd, headers });
            const json = await resp.json();
            document.getElementById('out').innerText = JSON.stringify(json, null, 2);
        }
    </script>
</body>

</html>